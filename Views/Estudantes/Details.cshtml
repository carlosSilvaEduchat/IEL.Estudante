@model IEL.Estudantes.Models.Estudante

@{
    ViewData["Title"] = "Detalhes do Estudante";
    ViewData["ActivePage"] = "Estudantes";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0 text-gray-800">Detalhes do Estudante</h1>
    <div>
        <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-primary">
            <i class="fas fa-edit me-1"></i> Editar
        </a>
        <a asp-action="Index" class="btn btn-secondary">
            <i class="fas fa-arrow-left me-1"></i> Voltar
        </a>
    </div>
</div>

<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex justify-content-between align-items-center">
        <h6 class="m-0 font-weight-bold text-primary">Informações do Estudante</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow">
                <li><a class="dropdown-item" href="#"><i class="fas fa-print fa-sm me-2"></i>Imprimir</a></li>
                <li><a class="dropdown-item" href="#"><i class="fas fa-file-export fa-sm me-2"></i>Exportar</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash-alt fa-sm me-2"></i>Excluir</a></li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-4">
                <div class="text-center mb-4">
                    <div class="bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center rounded-circle" style="width: 150px; height: 150px;">
                        <i class="fas fa-user-graduate fa-4x text-primary"></i>
                    </div>
                    <h4 class="mt-3">@Html.DisplayFor(model => model.Nome)</h4>
                    <p class="text-muted">Estudante</p>
                </div>
                
                <div class="card shadow-sm mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Informações de Contato</h6>
                    </div>
                    <div class="card-body">
                        <p class="mb-2">
                            <i class="fas fa-id-card me-2 text-gray-400"></i>
                            <span class="fw-bold">CPF:</span> 
                            <span class="cpf-mask">@Html.DisplayFor(model => model.CPF)</span>
                        </p>
                        @if (!string.IsNullOrEmpty(Model.Endereco))
                        {
                            <p class="mb-0">
                                <i class="fas fa-map-marker-alt me-2 text-gray-400"></i>
                                <span class="fw-bold">Endereço:</span> @Html.DisplayFor(model => model.Endereco)
                            </p>
                        }
                    </div>
                </div>
            </div>
            
            <div class="col-lg-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Informações Acadêmicas</h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <tbody>
                                    <tr>
                                        <th class="w-25">@Html.DisplayNameFor(model => model.Nome)</th>
                                        <td>@Html.DisplayFor(model => model.Nome)</td>
                                    </tr>
                                    <tr>
                                        <th>@Html.DisplayNameFor(model => model.CPF)</th>
                                        <td class="cpf-mask">@Html.DisplayFor(model => model.CPF)</td>
                                    </tr>
                                    <tr>
                                        <th>@Html.DisplayNameFor(model => model.Endereco)</th>
                                        <td>@(string.IsNullOrEmpty(Model.Endereco) ? "-" : Model.Endereco)</td>
                                    </tr>
                                    <tr>
                                        <th>@Html.DisplayNameFor(model => model.DataConclusao)</th>
                                        <td>@(Model.DataConclusao.HasValue ? Model.DataConclusao.Value.ToString("dd/MM/yyyy") : "-")</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Ações Rápidas</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-wrap gap-2">
                            <a href="#" class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-envelope me-1"></i> Enviar E-mail
                            </a>
                            <a href="#" class="btn btn-outline-success btn-sm">
                                <i class="fas fa-file-invoice me-1"></i> Emitir Certificado
                            </a>
                            <a href="#" class="btn btn-outline-info btn-sm">
                                <i class="fas fa-history me-1"></i> Histórico
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer text-end">
        <small class="text-muted">
            <i class="far fa-clock me-1"></i> 
            Última atualização: @DateTime.Now.ToString("dd/MM/yyyy HH:mm")
        </small>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Aplicar máscara de CPF
            $('.cpf-mask').each(function() {
                let cpf = $(this).text().trim();
                if (cpf.length === 11) {
                    cpf = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
                    $(this).text(cpf);
                }
            });
        });
    </script>
}